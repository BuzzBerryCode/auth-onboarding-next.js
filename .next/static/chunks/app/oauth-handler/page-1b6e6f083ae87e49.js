(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[703],{5891:function(e,s,n){Promise.resolve().then(n.bind(n,2925))},9260:function(e,s,n){"use strict";n.d(s,{O:function(){return o}});var t=n(1492);let o=(0,t.eI)("https://unovwhgnwenxbyvpevcz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVub3Z3aGdud2VueGJ5dnBldmN6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIxMzY1NDAsImV4cCI6MjA2NzcxMjU0MH0.UgHG08bBKdJDo0mJNX61z-ihd3WPScaxNX_zmNDIHSs")},2925:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return OAuthHandler}});var t=n(7437),o=n(2265),r=n(4033),i=n(9260);function OAuthHandler(){let e=(0,r.useRouter)(),[s,n]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let handleOAuthRedirect=async()=>{let s=window.location.hash.substring(1),n=new URLSearchParams(s),t=n.get("access_token"),o=n.get("refresh_token"),r=n.get("expires_at");if(console.log("OAuth handler received tokens:",{accessToken:!!t,refreshToken:!!o,expiresAt:r}),t&&o)try{let{error:s}=await i.O.auth.setSession({access_token:t,refresh_token:o});if(s){console.error("Error setting session:",s),e.push("/");return}console.log("Session set successfully"),setTimeout(async()=>{let{data:{user:s}}=await i.O.auth.getUser();if(s){console.log("User found:",s.email);let{data:n}=await i.O.from("invitation_codes").select("*").eq("assigned_email",s.email).eq("used",!0).maybeSingle();if(n){let{data:n}=await i.O.from("onboarding_data").select("*").eq("user_id",s.id).maybeSingle();n?(console.log("User has completed onboarding, redirecting to dashboard"),e.push("/dashboard")):(console.log("User needs onboarding, redirecting to onboarding"),e.push("/onboarding"))}else console.log("User needs invitation code, redirecting to private-beta"),e.push("/private-beta")}else console.log("No user found after session set"),e.push("/")},100)}catch(s){console.error("Error in OAuth handler:",s),e.push("/")}else console.log("No tokens found in URL"),e.push("/")},s=setTimeout(()=>{console.log("OAuth handler timeout, redirecting to home"),e.push("/")},5e3);return handleOAuthRedirect(),()=>clearTimeout(s)},[e]),(0,t.jsx)("div",{className:"min-h-screen bg-gray-100"})}}},function(e){e.O(0,[717,971,472,744],function(){return e(e.s=5891)}),_N_E=e.O()}]);