(()=>{var e={};e.id=703,e.ids=[703],e.modules={2213:e=>{function webpackEmptyContext(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id=2213,e.exports=webpackEmptyContext},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},4577:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},8359:()=>{},3739:()=>{},9968:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>c,pages:()=>d,routeModule:()=>h,tree:()=>l});var s=r(7096),o=r(6132),n=r(7284),a=r.n(n),i=r(2564),u={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>i[e]);r.d(t,u);let l=["",{children:["oauth-handler",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3727)),"/Users/odinlund/Desktop/BuzzBerry/Code/BuzzBerry Modular Flow/auth-onboarding-next.js/app/oauth-handler/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5345)),"/Users/odinlund/Desktop/BuzzBerry/Code/BuzzBerry Modular Flow/auth-onboarding-next.js/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/odinlund/Desktop/BuzzBerry/Code/BuzzBerry Modular Flow/auth-onboarding-next.js/app/oauth-handler/page.tsx"],c="/oauth-handler/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/oauth-handler/page",pathname:"/oauth-handler",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},7454:(e,t,r)=>{Promise.resolve().then(r.bind(r,8678))},1566:(e,t,r)=>{"use strict";r.d(t,{O:()=>o});var s=r(6315);let o=(0,s.createClient)("https://unovwhgnwenxbyvpevcz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVub3Z3aGdud2VueGJ5dnBldmN6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIxMzY1NDAsImV4cCI6MjA2NzcxMjU0MH0.UgHG08bBKdJDo0mJNX61z-ihd3WPScaxNX_zmNDIHSs")},8678:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>OAuthHandler});var s=r(784),o=r(9885),n=r(7114),a=r(1566);function OAuthHandler(){let e=(0,n.useRouter)(),[t,r]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let handleOAuthRedirect=async()=>{let t=window.location.hash.substring(1),r=new URLSearchParams(t),s=r.get("access_token"),o=r.get("refresh_token"),n=r.get("expires_at");if(console.log("OAuth handler received tokens:",{accessToken:!!s,refreshToken:!!o,expiresAt:n}),s&&o)try{let{error:t}=await a.O.auth.setSession({access_token:s,refresh_token:o});if(t){console.error("Error setting session:",t),e.push("/");return}console.log("Session set successfully"),setTimeout(async()=>{let{data:{user:t}}=await a.O.auth.getUser();if(t){console.log("User found:",t.email);let{data:r}=await a.O.from("invitation_codes").select("*").eq("assigned_email",t.email).eq("used",!0).maybeSingle();if(r){let{data:r}=await a.O.from("onboarding_data").select("*").eq("user_id",t.id).maybeSingle();r?(console.log("User has completed onboarding, redirecting to dashboard"),e.push("/dashboard")):(console.log("User needs onboarding, redirecting to onboarding"),e.push("/onboarding"))}else console.log("User needs invitation code, redirecting to private-beta"),e.push("/private-beta")}else console.log("No user found after session set"),e.push("/")},100)}catch(t){console.error("Error in OAuth handler:",t),e.push("/")}else console.log("No tokens found in URL"),e.push("/")},t=setTimeout(()=>{console.log("OAuth handler timeout, redirecting to home"),e.push("/")},5e3);return handleOAuthRedirect(),()=>clearTimeout(t)},[e]),s.jsx("div",{className:"min-h-screen bg-gray-100"})}},3727:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>a,__esModule:()=>n,default:()=>u});var s=r(5153);let o=(0,s.createProxy)(String.raw`/Users/odinlund/Desktop/BuzzBerry/Code/BuzzBerry Modular Flow/auth-onboarding-next.js/app/oauth-handler/page.tsx`),{__esModule:n,$$typeof:a}=o,i=o.default,u=i}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[214,322,765],()=>__webpack_exec__(9968));module.exports=r})();